{{define "view"}}
<main class="w-full px-4 py-8">
  <!-- Hero Section -->
  <div class="text-center" style="max-width: 1200px; margin: 0 auto 3rem auto;">
    <h1 class="text-4xl md:text-6xl font-bold text-textPrimary mb-4 neon-glow">
      üåæ G.R.A.I.N.
    </h1>
    <p class="text-2xl md:text-3xl italic text-orange-500 mb-6 neon-glow-orange">
      Go Relay Architecture for Implementing Nostr
    </p>
    <p class="text-lg text-textMuted max-w-3xl mx-auto">
      A highly configurable Nostr relay implementation with a powerful Go client library
      and built-in web frontend for relay status and client features.
    </p>
  </div>

  <!-- Public Instance Banner -->
  <div class="cyber-card warm-glow rounded-xl border-2 border-orange-500 p-6 text-center" style="max-width: 1200px; margin: 0 auto 3rem auto;">
    <h2 class="text-2xl font-bold text-textPrimary mb-3 neon-glow">
      üåæ Try it Now: wss://wheat.happytavern.co
    </h2>
    <p class="text-textMuted mb-4">
      My public GRAIN instance is live! Connect your Nostr client and start using it today.
    </p>
    <div class="flex flex-wrap justify-center gap-4 mb-4">
      <a
        href="https://wheat.happytavern.co"
        target="_blank"
        class="cyber-button-primary px-6 py-3 font-bold text-white rounded-lg inline-block"
      >
        Visit Relay Frontend
      </a>
    </div>
    <div class="cyber-card rounded-lg border-2 border-textHighlighted p-4 bg-bgSecondary">
      <p class="text-textMuted mb-2">
        <span class="text-orange-500 font-semibold">Storage Policy:</span> This relay accepts any event and stores them for a set time before removal.
      </p>
      <p class="text-lg font-bold text-orange-500">
        Want permanent storage?
        <a href="/nostr-verified" class="link-light-purple underline hover:text-orange-400">Get a Happy Tavern Membership</a>
        for whitelist access!
      </p>
    </div>
  </div>

  <!-- Why GRAIN Section -->
  <div class="cyber-card warm-glow rounded-xl border-2 border-orange-500 p-8" style="max-width: 1200px; margin: 0 auto 3rem auto;">
    <h2 class="text-3xl font-bold text-textPrimary mb-6 text-center neon-glow">
      Why GRAIN?
    </h2>
    <div class="text-textMuted space-y-4 max-w-4xl mx-auto">
      <p class="text-center text-xl text-orange-500 font-bold neon-glow-orange">
        The key to GRAIN is being highly configurable to fit multiple use cases.
      </p>
      <p class="text-lg">
        GRAIN was created because existing Nostr relay solutions didn't offer the flexibility needed
        for diverse deployment scenarios. At its core, GRAIN is a <span class="text-orange-500 font-semibold">powerful,
        production-ready Nostr relay</span> that you can configure to meet any need‚Äîwhether you're running
        a public relay, a private community relay, or a specialized relay with custom rules.
      </p>
      <p class="text-lg">
        But GRAIN is <span class="text-orange-500 font-semibold">more than just a relay</span>‚Äîit's also a
        comprehensive <span class="text-orange-500 font-semibold">Go library for building all sorts of Nostr
        applications and tools</span>. The client library handles connection pooling, event management,
        authentication, and more, so you can focus on building your application instead of reinventing the wheel.
      </p>
      <div class="cyber-card rounded-lg border-2 border-textHighlighted p-6 bg-bgSecondary">
        <p class="text-center text-lg font-bold text-textPrimary mb-3">
          üåæ GRAIN is Open Source
        </p>
        <p class="text-center">
          GRAIN is completely <span class="text-orange-500 font-semibold">free and open source</span>.
          You can run your own relay, customize it however you want, and contribute to the project.
          That's what GRAIN is all about‚Äîgiving you the freedom and tools to build on Nostr your way.
        </p>
      </div>
    </div>
  </div>

  <!-- What is GRAIN Section -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8" style="max-width: 1200px; margin: 0 auto 3rem auto;">

    <!-- Nostr Relay -->
    <div class="cyber-card warm-glow rounded-xl border-2 border-textHighlighted p-6">
      <div class="text-center mb-4">
        <div class="text-4xl mb-3">üì°</div>
        <h3 class="text-xl font-bold text-textPrimary mb-3 neon-glow">Nostr Relay</h3>
      </div>
      <ul class="text-sm text-textMuted space-y-2">
        <li>‚úì Highly configurable via YAML settings</li>
        <li>‚úì MongoDB-backed event storage</li>
        <li>‚úì Advanced rate limiting & resource controls</li>
        <li>‚úì Whitelist/blacklist filtering</li>
        <li>‚úì Hot configuration reloading</li>
        <li>‚úì Event purging with retention policies</li>
        <li>‚úì NIP support: 1, 2, 9, 11, 40, 42, 65</li>
      </ul>
    </div>

    <!-- Go Client Library -->
    <div class="cyber-card warm-glow rounded-xl border-2 border-orange-500 p-6">
      <div class="text-center mb-4">
        <div class="text-4xl mb-3">üìö</div>
        <h3 class="text-xl font-bold text-textPrimary mb-3 neon-glow">Go Client Library</h3>
      </div>
      <ul class="text-sm text-textMuted space-y-2">
        <li>‚úì Connection pooling & relay management</li>
        <li>‚úì Event signing & broadcasting</li>
        <li>‚úì Subscription management with filters</li>
        <li>‚úì Key generation & conversion utilities</li>
        <li>‚úì Session-based authentication</li>
        <li>‚úì Perfect for building Nostr apps in Go</li>
        <li>‚úì Production-grade with error handling</li>
      </ul>
    </div>

  </div>

  <!-- Get Started Section -->
  <div class="text-center" style="max-width: 1200px; margin: 0 auto 3rem auto;">
    <div class="cyber-card warm-glow rounded-xl border-2 border-orange-500 p-8">
      <h2 class="text-3xl font-bold text-textPrimary mb-6 neon-glow">
        Get Started with GRAIN
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
        <a
          href="https://github.com/0ceanSlim/grain"
          target="_blank"
          class="cyber-button-primary px-6 py-3 font-bold text-white rounded-lg"
        >
          GitHub Repository
        </a>
        <a
          href="https://github.com/0ceanSlim/grain/blob/main/docs/installation.md"
          target="_blank"
          class="cyber-button px-6 py-3 font-bold rounded-lg"
        >
          Installation Guide
        </a>
        <a
          href="https://github.com/0ceanSlim/grain/blob/main/docs/configuration.md"
          target="_blank"
          class="cyber-button px-6 py-3 font-bold rounded-lg"
        >
          Configuration Docs
        </a>
        <a
          href="https://github.com/0ceanSlim/grain/blob/main/docs/api.md"
          target="_blank"
          class="cyber-button px-6 py-3 font-bold rounded-lg"
        >
          API Documentation
        </a>
      </div>
      <p class="text-textMuted">
        GRAIN is open source and built with ‚ù§Ô∏è for the Nostr community.
        Contributions and feedback are always welcome!
      </p>
    </div>
  </div>

  <!-- Frontend Features Section -->
  <div class="cyber-card warm-glow rounded-xl border-2 border-textHighlighted p-8" style="max-width: 1200px; margin: 0 auto 3rem auto;">
    <h2 class="text-2xl font-bold text-textPrimary mb-6 text-center neon-glow">
      üñ•Ô∏è Built-in Web Frontend
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div>
        <h4 class="text-lg font-semibold text-orange-500 mb-2">Relay Dashboard</h4>
        <ul class="text-sm text-textMuted space-y-1">
          <li>‚Ä¢ Real-time relay status</li>
          <li>‚Ä¢ Configuration management</li>
          <li>‚Ä¢ Connection monitoring</li>
          <li>‚Ä¢ Hot-reload interface</li>
        </ul>
      </div>
      <div>
        <h4 class="text-lg font-semibold text-orange-500 mb-2">Event & Profile Viewer</h4>
        <ul class="text-sm text-textMuted space-y-1">
          <li>‚Ä¢ View user profiles</li>
          <li>‚Ä¢ Display event details</li>
          <li>‚Ä¢ Search functionality</li>
          <li>‚Ä¢ Profile caching</li>
        </ul>
      </div>
      <div>
        <h4 class="text-lg font-semibold text-orange-500 mb-2">Client Tools</h4>
        <ul class="text-sm text-textMuted space-y-1">
          <li>‚Ä¢ Relay ping/latency testing</li>
          <li>‚Ä¢ Key generation & conversion</li>
          <li>‚Ä¢ Event publishing</li>
          <li>‚Ä¢ Multiple auth methods</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Configuration Examples Section -->
  <section class="max-w-full space-y-4 px-4" style="margin: 0 auto 3rem auto;">
    <h2 class="text-2xl md:text-3xl font-semibold text-textPrimary text-center neon-glow">
      ‚öôÔ∏è Configuration Examples
    </h2>

    <p class="text-base md:text-lg text-textMuted text-center max-w-3xl mx-auto">
      GRAIN is designed for simplicity and flexibility. Customize settings to suit your requirements
      by editing the YAML configuration files.
    </p>

    <div class="cyber-card warm-glow rounded-xl border-2 border-textHighlighted p-6" style="max-width: 1200px; margin: 0 auto;">
      <div class="flex flex-wrap justify-center gap-2 mb-4">
        <button
          onclick="loadContent('https://raw.githubusercontent.com/0ceanSlim/grain/main/docs/examples/config.example.yml')"
          class="cyber-button px-4 py-2 font-bold rounded-lg"
        >
          Config
        </button>
        <button
          onclick="loadContent('https://raw.githubusercontent.com/0ceanSlim/grain/main/docs/examples/whitelist.example.yml')"
          class="cyber-button px-4 py-2 font-bold rounded-lg"
        >
          Whitelist
        </button>
        <button
          onclick="loadContent('https://raw.githubusercontent.com/0ceanSlim/grain/main/docs/examples/blacklist.example.yml')"
          class="cyber-button px-4 py-2 font-bold rounded-lg"
        >
          Blacklist
        </button>
        <button
          onclick="loadContent('https://raw.githubusercontent.com/0ceanSlim/grain/main/docs/examples/relay_metadata.example.json')"
          class="cyber-button px-4 py-2 font-bold rounded-lg"
        >
          Relay Metadata
        </button>
      </div>
      <pre
        id="config-content"
        class="border-2 border-textHighlighted w-full max-w-full bg-bgPrimary text-textPrimary text-left rounded shadow overflow-x-auto p-4 text-sm break-words"
      ></pre>
    </div>
  </section>

</main>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    hljs.highlightAll();
    loadContent(
      "https://raw.githubusercontent.com/0ceanSlim/grain/main/docs/examples/config.example.yml"
    );
  });

  function loadContent(url) {
    fetch(url)
      .then((response) => response.text())
      .then((data) => {
        const preElement = document.getElementById("config-content");
        preElement.innerHTML = `<code>${data}</code>`;
        hljs.highlightElement(preElement);
      })
      .catch((error) => {
        console.error("Error fetching content:", error);
      });
  }
</script>
{{end}}
