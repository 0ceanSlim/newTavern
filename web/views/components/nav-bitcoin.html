{{define "nav-bitcoin"}}
<li class="relative rounded-md group bg-bgSecondary text-textPrimary">
  <a
    href="#"
    onclick="toggleDropdown('nostrDropdown')"
    class="flex items-center justify-between p-2 space-x-2 hover:rounded-md hover:text-textHighlighted"
  >
    <div class="w-12 h-12 md:w-14 md:h-14">
      <img
        class="object-contain w-full h-full"
        src="static/img/bitcoin.png"
        alt="bitcoin icon"
      />
    </div>
    <span class="text-sm md:text-base">Bitcoin</span>
    <svg
      class="w-4 h-4 ml-2"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M19 9l-7 7-7-7"
      />
    </svg>
  </a>

  <!-- Dropdown container -->
  <div
    id="nostrDropdown"
    class="absolute left-0 lg:left-auto hidden lg:group-hover:block lg:m-2 mt-2 border rounded-md shadow-lg border-bgInverted bg-bgSecondary"
    style="min-width: 12rem; z-index: 10"
  >
    <!-- Pseudo-element for hover gap -->
    <div class="absolute w-full h-3 -top-3"></div>

    <ul class="py-2">
      <li>
        <a
          class="flex items-center px-4 py-2 space-x-2 whitespace-nowrap hover:text-textHighlighted"
          hx-trigger="click"
          hx-get="/bitcoin-works"
          hx-push-url="/bitcoin-works"
          href="/bitcoin-works"
          hx-swap="outerHTML"
          hx-target="body"
        >
          <span>How does it work?</span>
        </a>
      </li>
      <li>
        <a
          class="flex items-center px-4 py-2 space-x-2 whitespace-nowrap hover:text-textHighlighted"
          hx-trigger="click"
          hx-get="/mempool"
          hx-push-url="/mempool"
          href="/mempool"
          hx-swap="outerHTML"
          hx-target="body"
        >
          <img
            src="https://getumbrel.github.io/umbrel-apps-gallery/mempool/icon.svg"
            alt="mempool icon"
            class="w-6 h-6 rounded-sm"
          />
          <span>mempool</span>
        </a>
      </li>
      <li>
        <a
          href="https://books.happytavern.co"
          target="_blank"
          rel="noopener noreferrer"
          style="aspect-ratio: 3 / 1"
          class="flex items-center px-4 py-2 space-x-2 whitespace-nowrap hover:text-textHighlighted"
          onclick="return confirmNavigation(this)"
        >
          <span>ðŸ“š Bitcoin Books</span>
        </a>
      </li>
    </ul>
  </div>
</li>
<script>
  function confirmNavigation(link) {
    // Show confirmation with "bitcoin" in quotes
    const confirmation = confirm('The guest login and password is "bitcoin"');
    if (confirmation) {
      // Open the link in a new tab
      window.open(link.href, "_blank", "noopener,noreferrer");
    }
    return false; // Prevent default navigation
  }
</script>
{{end}}
